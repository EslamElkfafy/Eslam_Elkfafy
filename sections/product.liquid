{{ 'product.css' | asset_url | stylesheet_tag }}

<section class="product-section">
  <div class="product-container">
    <div class="product-title-container">
      <h2 class="product-title">Tisso vison in the wild</h2>
    </div>

      <div class="product-gallery">
        {% if section.blocks.size > 0 %}
          {%- comment -%} Show products chosen in the customizer {%- endcomment -%}
          {% for block in section.blocks %}
            {% assign product = all_products[block.settings.product] %}
            {% if product %}
              <div class="product-item">
                <img
                  src="{{ product.featured_image | img_url: '400x' }}"
                  alt="{{ product.title }}"
                  class="product-image"
                  width="433"
                  height="444"
                  loading="lazy"
                >
                <button
                  class="add-button"
                  aria-label="Add {{ product.title }} to cart"
                  onclick="openProductModal('{{ product.handle | escape }}')"
                ></button>
              </div>
            {% endif %}
          {% endfor %}
        {% else %}
          {%- comment -%} Fallback: first 6 products from all collections {%- endcomment -%}
          {% for product in collections.all.products limit: 6 %}
            <div class="product-item">
              <img
                src="{{ product.featured_image | img_url: '400x' }}"
                alt="{{ product.title }}"
                class="product-image"
                width="433"
                height="444"
                loading="lazy"
              >
              <button
                class="add-button"
                aria-label="Add {{ product.title }} to cart"
                onclick="openProductModal('{{ product.handle | escape }}')"
              ></button>
            </div>
          {% endfor %}
        {% endif %}
      </div>
  </div>
</section>

<!-- Product Modal -->
{% render 'modal' %}

{% schema %}
  {
    "name": "Product Grid",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Section title",
        "default": "Featured Products"
      }
    ],
    "blocks": [
      {
        "type": "product",
        "name": "Product",
        "settings": [
          {
            "type": "product",
            "id": "product",
            "label": "Select product"
          }
        ]
      }
    ],
    "max_blocks": 6,
    "presets": [
      {
        "name": "Product Grid",
        "category": "Products",
        "blocks": [
          { "type": "product" },
          { "type": "product" },
          { "type": "product" },
          { "type": "product" },
          { "type": "product" },
          { "type": "product" }
        ]
      }
    ]
  }
  {% endschema %}
